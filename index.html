<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CashMTL - Les Myst√®res Souterrains de Montr√©al ‚Äì 1er prix 25 000$</title>
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #1a1a1a; color: #eee; margin: 0; padding: 0; }
header { text-align: center; padding: 50px 20px; background: linear-gradient(135deg, #2b2b2b, #121212); box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
header h1 { margin: 0; font-size: 2em; font-weight: bold; color: #fff; }
header p { margin-top: 10px; font-size: 1.1em; color: #ccc; }
main { max-width: 700px; margin: 40px auto; padding: 0 20px; }
section { margin-bottom: 40px; }
ul { margin-left: 20px; }
form { display: flex; flex-direction: column; align-items: center; }
input, button { padding: 12px; margin: 8px 0; width: 100%; max-width: 300px; border: none; border-radius: 6px; }
input { background: #2b2b2b; color: #fff; }
button { background: #444; color: #fff; cursor: pointer; transition: 0.3s; }
button:hover { background: #555; }
#share-section { display: none; margin-top: 30px; }
.subscribe-buttons { display: flex; justify-content: center; margin-top: 15px; gap: 10px; }
.subscribe-buttons button { width: auto; padding: 10px 15px; }
strong.red { color: red; }
</style>
</head>
<body>

<header>
<h1>CashMTL ‚Äì Les Myst√®res Souterrains de Montr√©al ‚Äì 1er prix 25 000$ !</h1>
<p>Participez √† la chasse au tr√©sor et d√©couvrez les secrets cach√©s de Montr√©al.</p>
</header>

<main>
<section>
<h2>D√©tails du concours :</h2>
<ul>
<li>Th√©matique : Catacombes et secrets de Montr√©al</li>
<li>L‚Äô√©nigme finale : trouvez les catacombes de Montr√©al</li>
<li>Inscription gratuite pour recevoir la premi√®re √©nigme</li>
<li>Abonnement obligatoire √† la cha√Æne YouTube, page Facebook et groupe Telegram pour d√©bloquer la premi√®re √©nigme</li>
<li><strong class="red">Toutes les r√©ponses aux √©nigmes seront envoy√©es exclusivement via Telegram</strong></li>
<li>R√©compenses :</li>
<ul>
  <li><strong>Top 1 :</strong> 25 000$ + cadeau myst√®re (1 personne)</li>
  <li><strong>Top 2 :</strong> 1 000$ (25 personnes)</li>
  <li><strong>Top 3 :</strong> 100$ (100 personnes)</li>
</ul>
</ul>
</section>

<!-- Formulaire d'inscription -->
<form id="registrationForm">
  <input type="text" id="name" placeholder="Nom complet" required>
  <input type="email" id="email" placeholder="Email" required>
  <input type="tel" id="phone" placeholder="Num√©ro de t√©l√©phone" required>
  <input type="text" id="telegram" placeholder="Nom utilisateur Telegram (ex: @username)" required>
  <button type="submit">S'inscrire</button>
</form>

<!-- Section abonnements apr√®s inscription -->
<div id="share-section">
  <h2>Abonnez-vous pour d√©bloquer la premi√®re √©nigme</h2>
  <p>Vous devez :</p>
  <ul>
    <li>S‚Äôabonner √† notre cha√Æne YouTube</li>
    <li>Rejoindre notre page Facebook</li>
    <li>Rejoindre notre groupe Telegram</li>
  </ul>

  <div class="subscribe-buttons">
    <button type="button" id="subscribeYT">S'abonner √† YouTube</button>
    <button type="button" id="subscribeFB">Rejoindre la page Facebook</button>
    <button type="button" id="subscribeTG">Rejoindre le groupe Telegram</button>
  </div>

  <div id="bot-button" style="margin-top:20px; display:none;">
    <p>Pour recevoir l'√©nigme, d√©marrez une conversation avec notre bot Telegram :</p>
    <a href="https://t.me/cashmtlbot" target="_blank">
      <button type="button">D√©marrer le bot Telegram</button>
    </a>
  </div>

  <p id="ytStatus">Statut abonnement YouTube : non confirm√©</p>
  <p id="fbStatus">Statut page Facebook : non confirm√©</p>
  <p id="tgStatus">Statut groupe Telegram : non confirm√©</p>

  <button id="finish-btn">Finaliser et d√©bloquer l‚Äô√©nigme</button>
</div>
</main>

<script>
let ytSubscribed = false, fbSubscribed = false, tgSubscribed = false;

const TELEGRAM_TOKEN = "8328974948:AAFQXi0TLcdoPd3OVRvVPlQOkUk9L0pt2w8";
const form = document.getElementById('registrationForm');
const shareSection = document.getElementById('share-section');
const finishBtn = document.getElementById('finish-btn');
const botButton = document.getElementById('bot-button');
botButton.style.display = 'none';

form.addEventListener('submit', function(e) {
  e.preventDefault();

  const data = {
    nom: document.getElementById('name').value,
    email: document.getElementById('email').value,
    telephone: document.getElementById('phone').value,
    telegram: document.getElementById('telegram').value
  };

  google.script.run
    .withSuccessHandler(() => {
      alert("‚úÖ Inscription enregistr√©e dans Google Sheet !");
      form.style.display = 'none';
      shareSection.style.display = 'block';
    })
    .withFailureHandler(err => {
      alert("‚ö†Ô∏è Erreur Apps Script: " + err.message);
    })
    .doPost({ postData: { contents: JSON.stringify(data) } });
});

// Abonnements
document.getElementById('subscribeYT').addEventListener('click', () => {
  window.open("https://www.youtube.com/channel/TON_ID_DE_CHAINE",'_blank');
  ytSubscribed = true; document.getElementById('ytStatus').textContent = "Statut abonnement YouTube : suppos√© confirm√©"; checkSubscriptions();
});
document.getElementById('subscribeFB').addEventListener('click', () => {
  window.open("https://www.facebook.com/TON_ID_PAGE",'_blank');
  fbSubscribed = true; document.getElementById('fbStatus').textContent = "Statut page Facebook : suppos√© confirm√©"; checkSubscriptions();
});
document.getElementById('subscribeTG').addEventListener('click', () => {
  window.open("https://t.me/TON_GROUPE_TG",'_blank');
  tgSubscribed = true; document.getElementById('tgStatus').textContent = "Statut groupe Telegram : suppos√© confirm√©"; checkSubscriptions();
});

function checkSubscriptions(){ if(ytSubscribed && fbSubscribed && tgSubscribed){ botButton.style.display = 'block'; } }

finishBtn.addEventListener('click', () => {
  if(!ytSubscribed || !fbSubscribed || !tgSubscribed){
    alert("Vous devez compl√©ter tous les abonnements pour d√©bloquer l'√©nigme !");
    return;
  }
  const telegramUser = document.getElementById('telegram').value;
  sendTelegramEnigme(telegramUser);
  alert("Toutes les conditions remplies ! Vous avez re√ßu l'√©nigme sur Telegram.");
});

function sendTelegramEnigme(telegramUser){
  fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ chat_id: telegramUser, text: "üéØ F√©licitations ! Voici votre premi√®re √©nigme : [r√©ponse ici]" })
  })
  .then(res => res.json()).then(data => console.log("√ânigme envoy√©e :", data))
  .catch(err => console.error("Erreur envoi Telegram :", err));
}
</script>
</body>
</html>